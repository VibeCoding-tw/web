<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>防止瀏覽器預設行為：打造原生 App 體驗 - Vibe Coding</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

</head>

<body class="bg-gray-50 font-[Inter] text-gray-800 overscroll-none">

    <!-- Hero Section -->
    <header
        class="relative bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 text-white pt-24 pb-32 overflow-hidden">
        <div
            class="header-overlay absolute inset-0 bg-gradient-to-r from-indigo-900/90 to-purple-800/90 mix-blend-multiply">
        </div>

        <!-- Decorative background elements -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0 opacity-20">
            <div
                class="absolute top-10 left-10 w-64 h-64 bg-indigo-500 rounded-full mix-blend-overlay filter blur-3xl animate-pulse">
            </div>
            <div class="absolute bottom-10 right-10 w-80 h-80 bg-pink-500 rounded-full mix-blend-overlay filter blur-3xl animate-pulse"
                style="animation-delay: 2s"></div>
        </div>

        <div class="container mx-auto px-4 relative z-10 pt-10 pb-10 text-center text-white">
            <div
                class="badge-header inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 backdrop-blur-sm mb-8 text-sm font-semibold tracking-wide uppercase">
                <span class="w-2 h-2 rounded-full bg-indigo-400 animate-pulse"></span>
                Web Remote Control Strategy
            </div>
            <h1 class="text-4xl md:text-6xl font-bold mb-6 tracking-tight leading-tight">
                防止瀏覽器預設行為<br class="hidden md:block" />打造原生 App 體驗
            </h1>
            <p class="text-xl text-indigo-100 max-w-2xl mx-auto leading-relaxed mb-10">
                消除捲動、縮放與長按選單，將網頁轉化為專業的「無人車遙控器」。掌握 event.preventDefault() 與 CSS 鎖定技術的最後一哩路。
            </p>

            <div class="flex flex-wrap justify-center gap-4">
                <button onclick="enterMediaMode('video', 'https://www.youtube.com/embed/wFAjCsrHwrI')"
                    class="resource-btn bg-indigo-500 hover:bg-indigo-400 text-white px-8 py-4 rounded-full flex items-center gap-3 shadow-lg shadow-indigo-500/30 font-bold transition-all">
                    <span>📺</span> 觀看教學影片
                </button>
                <button
                    onclick="enterMediaMode('doc', 'https://docs.google.com/document/d/e/2PACX-1vTszRpt1IrV9Ns31US6SaE4ZM3zySh8iK2uX9c8BgDKl-C14qxUbCXwLCwOp8Kd3Scgba5vzKotFn0m/pub?embedded=true')"
                    class="resource-btn bg-white/10 hover:bg-white/20 border border-white/20 text-white px-8 py-4 rounded-full flex items-center gap-3 backdrop-blur-sm font-bold transition-all">
                    <span>📄</span> 閱讀課程講義
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 -mt-20 relative z-20 pb-20">

        <!-- Module 1: event.preventDefault() -->
        <section class="module-section mb-16">
            <div class="glass-card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="p-1 bg-gradient-to-r from-indigo-500 to-purple-500"></div>
                <div class="p-8 md:p-12">
                    <div class="section-header-left border-l-4 border-indigo-500 pl-6 mb-12">
                        <span class="text-indigo-600 font-bold tracking-wider uppercase text-sm">Module 1: JavaScript
                            Control</span>
                        <h2 class="text-4xl font-bold text-gray-900 mt-2">掌控事件主導權</h2>
                    </div>

                    <div class="grid md:grid-cols-2 gap-12 items-start">
                        <div class="space-y-6">
                            <h3 class="text-2xl font-bold text-gray-800">event.preventDefault()</h3>
                            <p class="text-gray-600 leading-relaxed">
                                這是告訴瀏覽器：「這個動作由我的程式處理，你不需要執行預設反應」。在觸控操作中，這至關重要。
                            </p>

                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                                <h4 class="font-bold text-yellow-800 mb-2">Passive Event Listeners</h4>
                                <p class="text-sm text-yellow-700">
                                    現代瀏覽器預設將 window, document, body 的 touch 事件視為 <code>passive: true</code>
                                    (被動)，這意味著你無法在其中呼叫 <code>preventDefault()</code> 來阻止捲動，除非你明確設定
                                    <code>{ passive: false }</code>。
                                </p>
                            </div>

                            <button id="test-context-btn"
                                class="w-full py-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl border border-gray-300 transition-colors font-bold relative overflow-hidden group">
                                <span class="relative z-10">在此按鈕上按右鍵 / 長按</span>
                                <div
                                    class="absolute inset-0 bg-red-100 transform translate-y-full transition-transform duration-200 group-hover:translate-y-0 opacity-20">
                                </div>
                            </button>
                            <div id="context-msg" class="text-center text-sm font-mono h-6 text-red-500 font-bold">
                            </div>
                        </div>

                        <div class="bg-slate-900 rounded-xl p-6 shadow-xl border border-slate-800">
                            <div
                                class="flex justify-between mb-3 text-sm text-slate-400 font-bold uppercase tracking-wider">
                                <span>JavaScript</span>
                            </div>
                            <pre
                                class="font-mono text-sm leading-relaxed overflow-x-auto p-4 bg-slate-950 rounded-lg text-slate-300">
<span class="text-gray-500">// 阻止 Context Menu (右鍵選單)</span>
element.addEventListener(<span class="text-green-400">'contextmenu'</span>, (e) => {
    e.<span class="text-yellow-300">preventDefault()</span>;
    console.log(<span class="text-cyan-300">'Right click blocked!'</span>);
});

<span class="text-gray-500">// 阻止全頁面捲動 (需設定 passive: false)</span>
document.addEventListener(<span class="text-green-400">'touchmove'</span>, (e) => {
    e.<span class="text-yellow-300">preventDefault()</span>;
}, { <span class="text-purple-400">passive: false</span> });</pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 2: CSS Static Locking -->
        <section class="module-section mb-16">
            <div class="glass-card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="p-1 bg-gradient-to-r from-purple-500 to-pink-500"></div>
                <div class="p-8 md:p-12">
                    <div class="section-header-left border-l-4 border-purple-500 pl-6 mb-12">
                        <span class="text-purple-600 font-bold tracking-wider uppercase text-sm">Module 2: CSS
                            Lockdown</span>
                        <h2 class="text-4xl font-bold text-gray-900 mt-2">CSS 靜態鎖定技術</h2>
                    </div>

                    <div class="grid md:grid-cols-2 gap-12">
                        <div class="space-y-6">
                            <p class="text-gray-600 leading-relaxed">
                                使用 CSS 屬性是最直接、效能最好的方式來告訴瀏覽器某些元素不應該被選取或觸發手勢。
                            </p>

                            <div class="space-y-4">
                                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                    <code class="text-purple-600 font-bold block mb-2">user-select: none;</code>
                                    <p class="text-sm text-gray-600">防止使用者長按按鈕時，不小心選取到了按鈕上的文字或圖示。</p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                    <code class="text-purple-600 font-bold block mb-2">touch-action: none;</code>
                                    <p class="text-sm text-gray-600">最強力的屬性。告訴瀏覽器此元素不處理任何預設手勢（如平移、縮放）。瀏覽器會直接將所有 touch
                                        事件交給 JS 處理。</p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                    <code
                                        class="text-purple-600 font-bold block mb-2">-webkit-touch-callout: none;</code>
                                    <p class="text-sm text-gray-600">針對 iOS Safari，防止長按圖片或連結時跳出預覽或選單。</p>
                                </div>
                            </div>
                        </div>

                        <div
                            class="bg-gray-100 rounded-xl p-8 flex flex-col items-center justify-center gap-6 border-2 border-dashed border-gray-300">
                            <div class="text-center w-full">
                                <p class="mb-2 text-sm text-gray-500">一般按鈕 (長按會選取文字)</p>
                                <button
                                    class="bg-white text-gray-800 px-6 py-3 rounded shadow hover:shadow-md transition w-full">
                                    Selectable Text
                                </button>
                            </div>

                            <div class="text-center w-full">
                                <p class="mb-2 text-sm text-purple-600 font-bold">鎖定按鈕 (無法選取)</p>
                                <button
                                    class="bg-purple-600 text-white px-6 py-3 rounded shadow-lg shadow-purple-200/50 hover:bg-purple-700 transition w-full no-select touch-none select-none">
                                    Locked Button
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 3: Viewport & Challenges -->
        <section class="module-section mb-16">
            <div class="glass-card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="p-1 bg-gradient-to-r from-pink-500 to-rose-500"></div>
                <div class="p-8 md:p-12">
                    <div class="section-header-left border-l-4 border-pink-500 pl-6 mb-12">
                        <span class="text-pink-600 font-bold tracking-wider uppercase text-sm">Module 3: Viewport &
                            Challenges</span>
                        <h2 class="text-4xl font-bold text-gray-900 mt-2">視埠設定與實戰挑戰</h2>
                    </div>

                    <div class="mb-12 bg-blue-50 border border-blue-100 p-6 rounded-xl">
                        <h3 class="text-xl font-bold text-blue-800 mb-2">Viewport Meta Tag</h3>
                        <pre
                            class="bg-white p-3 rounded border border-blue-100 text-sm overflow-x-auto text-blue-600 code-block">
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;</pre>
                        <p class="mt-3 text-sm text-blue-700">
                            雖然 <code>user-scalable=no</code> 在部分新版 iOS Safari 可能被忽略，但它仍然是標準做法。配合
                            <code>touch-action: none</code> 和 <code>preventDefault</code> 可以達到 100% 的鎖定效果。
                        </p>
                    </div>

                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Task 3-1 -->
                        <div onclick="openSubmissionModal('prevent-default-task-1', '作業 3-1: 全螢幕鎖定挑戰賽')"
                            class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden flex flex-col h-full group cursor-pointer relative">
                            <div class="bg-gradient-to-r from-indigo-500 to-blue-500 h-2"></div>
                            <div class="p-6 flex-grow">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="font-bold text-xl text-gray-800 group-hover:text-indigo-600 transition">
                                        作業 3-1</h3>
                                    <span class="bg-indigo-100 text-indigo-700 text-xs px-2 py-1 rounded font-bold">45
                                        min</span>
                                </div>
                                <h4 class="font-bold text-gray-700 mb-3">全螢幕鎖定挑戰賽</h4>
                                <p class="text-sm text-gray-600 mb-4 leading-relaxed">
                                    實作一個「全螢幕模式」按鈕。當啟用後，徹底封鎖所有背景捲動。
                                </p>
                                <div class="mt-auto pt-4 border-t border-gray-50">
                                    <p class="text-xs text-gray-400 font-bold uppercase mb-1">Challenge</p>
                                    <p class="text-sm text-gray-500">在 document 層級監聽 touchmove 並有條件地執行 preventDefault()。
                                    </p>
                                </div>
                            </div>
                            <!-- Click Hint Overlay -->
                            <div
                                class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <span
                                    class="bg-white text-indigo-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">
                                    📤 點擊繳交作業
                                </span>
                            </div>
                        </div>

                        <!-- Task 3-2 -->
                        <div onclick="openSubmissionModal('prevent-default-task-2', '作業 3-2: iOS vs. Android 兼容性')"
                            class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden flex flex-col h-full group cursor-pointer relative">
                            <div class="bg-gradient-to-r from-purple-500 to-pink-500 h-2"></div>
                            <div class="p-6 flex-grow">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="font-bold text-xl text-gray-800 group-hover:text-purple-600 transition">
                                        作業 3-2</h3>
                                    <span class="bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded font-bold">60
                                        min</span>
                                </div>
                                <h4 class="font-bold text-gray-700 mb-3">iOS vs. Android 兼容性</h4>
                                <p class="text-sm text-gray-600 mb-4 leading-relaxed">
                                    解決 iOS 雙擊放大與 Android 長按選單的頑固問題。
                                </p>
                                <div class="mt-auto pt-4 border-t border-gray-50">
                                    <p class="text-xs text-gray-400 font-bold uppercase mb-1">Key Tech</p>
                                    <p class="text-sm text-gray-500">使用 <code>touch-action: manipulation</code> 優化點擊延遲。
                                    </p>
                                </div>
                            </div>
                            <!-- Click Hint Overlay -->
                            <div
                                class="absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <span
                                    class="bg-white text-purple-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">
                                    📤 點擊繳交作業
                                </span>
                            </div>
                        </div>

                        <!-- Task 3-3 -->
                        <div onclick="openSubmissionModal('prevent-default-task-3', '作業 3-3: 緊急操作壓力測試')"
                            class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden flex flex-col h-full group cursor-pointer relative">
                            <div class="bg-gradient-to-r from-pink-500 to-rose-500 h-2"></div>
                            <div class="p-6 flex-grow">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="font-bold text-xl text-gray-800 group-hover:text-pink-600 transition">作業
                                        3-3</h3>
                                    <span class="bg-pink-100 text-pink-700 text-xs px-2 py-1 rounded font-bold">45
                                        min</span>
                                </div>
                                <h4 class="font-bold text-gray-700 mb-3">緊急操作壓力測試</h4>
                                <p class="text-sm text-gray-600 mb-4 leading-relaxed">
                                    模擬「暴力操作」，快速、多指、亂序滑動，確保介面不位移。
                                </p>
                                <div class="mt-auto pt-4 border-t border-gray-50">
                                    <p class="text-xs text-gray-400 font-bold uppercase mb-1">Solution</p>
                                    <p class="text-sm text-gray-500">利用 <code>overscroll-behavior: contain</code>
                                        防止橡皮筋效果。</p>
                                </div>
                            </div>
                            <!-- Click Hint Overlay -->
                            <div
                                class="absolute inset-0 bg-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <span
                                    class="bg-white text-pink-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">
                                    📤 點擊繳交作業
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-900 text-white py-12 border-t border-gray-800">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-500">© 2024 Vibe Coding. All rights reserved.</p>
        </div>
    </footer>

    <!-- Media Overlay injected by course-shared.js -->

    <script>
        // --- Context Menu Demo ---
        const ctxBtn = document.getElementById('test-context-btn');
        const ctxMsg = document.getElementById('context-msg');

        ctxBtn.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            ctxMsg.innerText = "成功！右鍵選單已被攔截 (preventDefault work!)";
            ctxMsg.classList.remove('text-red-500');
            ctxMsg.classList.add('text-green-500');

            // Visual feedback
            ctxBtn.classList.add('bg-green-100', 'border-green-300');
            setTimeout(() => {
                ctxMsg.innerText = "";
                ctxBtn.classList.remove('bg-green-100', 'border-green-300');
            }, 2000);
        });

        // --- Standard Media Overlay Logic ---
        // Injected by course-shared.js

        window.RESOURCES = {
            youtube: "https://www.youtube.com/embed/wFAjCsrHwrI",
            doc: "https://docs.google.com/document/d/e/2PACX-1vTszRpt1IrV9Ns31US6SaE4ZM3zySh8iK2uX9c8BgDKl-C14qxUbCXwLCwOp8Kd3Scgba5vzKotFn0m/pub?embedded=true"
        };
    </script>
    <script src="/js/course-shared.js"></script>
    <script>
    </script>

    <!-- Assignment Guide (Hidden) -->
    <section id="assignment-guide" style="display: none;">
        <h2>作業指引 (Assignment Guide)</h2>

        <h3>作業 3-1：全螢幕鎖定 (Overscroll Prevention)</h3>
        <ul>
            <li><strong>角色扮演：</strong> App 體驗優化師。</li>
            <li><strong>執行方式：</strong> 使用 <code>event.preventDefault()</code> 與 CSS
                <code>touch-action: none</code>，實現即便在觸控時背景網頁也完全不會產生捲動或回彈。
            </li>
            <li><strong>評分重點：</strong> 在對話框或操作區域內進行滑動測試，確保背景視窗保持靜止。</li>
        </ul>

    </section>

    <!-- Instructor Guide (Hidden) -->
    <section id="instructor-guide" style="display: none;">
        <h2>GitHub Classroom 詳細操作指南</h2>
        <div class="classroom-guide">
            <p><strong>第一步：準備範本倉庫 (Template Repo)</strong></p>
            <ol>
                <li>上傳帶有「橡皮筋回彈」問題的框架代碼，並勾選 <strong>"Template repository"</strong>。</li>
            </ol>

            <p style="margin-top: 1rem;"><strong>第二步：建立 Classroom 作業</strong></p>
            <ol>
                <li>建立作業並連結範本，啟用 <strong>"Enable feedback pull requests"</strong> 以便對比優化前後的觸控體感。</li>
            </ol>

            <p style="margin-top: 1rem;"><strong>第三步：學生端操作 (Flipped Workflow)</strong></p>
            <ol>
                <li>學生領取作業，實作 <code>preventDefault()</code> 攔截與 CSS <code>touch-action</code> 鎖定。</li>
                <li>本地開發後 <strong>Push 代碼</strong>。</li>
            </ol>

            <p style="margin-top: 1rem;"><strong>第四步：教師回饋 (Review)</strong></p>
            <ol>
                <li>打開 Feedback PR，確認學生是否正確使用 <code>{passive: false}</code> 並針對 iOS Safari 的相容性處理給予評價。</li>
            </ol>
        </div>

        <h2>在 GitHub Classroom 的實戰部署建議</h2>
        <p>此單元引導學生優化網頁的移動端體驗，透過阻止預設行為使 Web App 表現得像原生 App，建議範本倉庫設置如下：</p>

        <h3>A. 範本倉庫 (Template Repo) 結構</h3>
        <pre><code>.
├── index.html       # 包含 Viewport 設定與按鈕介面
├── style.css        # (重點) 需加入 touch-action: none 與選取遏止
├── js/ux.js         # (重點) 實作 preventDefault() 攔截邏輯
└── README.md        # 體驗優化規範與 iOS/Android 兼容測試報告</code></pre>

        <h3>B. 參考範例代碼 (Reference Example Code)</h3>
        <p><strong>ux.js (阻止滾動與彈回)</strong></p>
        <pre><code>// 鎖定全螢幕，防止手機端下拉重新整理或底層捲動
document.addEventListener('touchmove', (e) => {
    if (window.isLocked) {
        e.preventDefault();
    }
}, { passive: false }); // 必須設為 passive: false 才能 preventDefault</code></pre>

        <p><strong>style.css (手勢鎖定)</strong></p>
        <pre><code>.control-pad {
    touch-action: none;   /* 徹底禁止瀏覽器處理手勢 (縮放/捲動) */
    user-select: none;    /* 防止長按選取文字 */
    -webkit-touch-callout: none; /* 防止 iOS 彈出選單 */
}</code></pre>

        <h3>C. 自動評分 (Autograding) 的設計</h3>
        <ul>
            <li><strong>語法檢查：</strong> 使用 Actions 掃描 <code>ux.js</code> 是否正確聲明了 <code>{passive: false}</code>。</li>
            <li><strong>樣式屬性：</strong> 驗證 <code>style.css</code> 中是否包含 <code>touch-action: none</code> 以解決縮放延遲。</li>
        </ul>

        <h2>翻轉教室的實施策略</h2>
        <table border="1" style="width:100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
                <tr style="background-color: #f8fafc;">
                    <th style="padding: 12px; border: 1px solid #e2e8f0; text-align: left;">階段</th>
                    <th style="padding: 12px; border: 1px solid #e2e8f0; text-align: left;">學生行動 (Git Workflow)</th>
                    <th style="padding: 12px; border: 1px solid #e2e8f0; text-align: left;">教師/平台角色</th>
                </tr>
            </thead>
            <tbody style="color: #4b5563;">
                <tr>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;"><strong>課前 (預習)</strong></td>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;">操作本頁的互動對比實驗，觀察普通網頁與 App 在滑動時的體感差異。</td>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;">
                        <strong>Dashboard：</strong>確認學生已體驗講義中的「反面教材」案例。
                    </td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;"><strong>課中 (實作)</strong></td>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;">實作全螢幕鎖定 (3-1) 並處理 iOS Safari 的相容性挑戰後 Commit。
                    </td>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;">
                        <strong>互動演示：</strong>分享學生優化後的頁面，討論「攔截」與「讓渡」的平衡。</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;"><strong>課後 (精進)</strong></td>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;">挑戰局部滾動區鎖定 (3-3) 並在 README 記錄優化前後的心得。</td>
                    <td style="padding: 12px; border: 1px solid #e2e8f0;"><strong>Feedback PR：</strong>審核學生對事件冒泡與網頁轉 App
                        體驗優化的理解。</td>
                </tr>
            </tbody>
        </table>
    </section>
</body>

</html>