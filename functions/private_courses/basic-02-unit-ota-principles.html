<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arduino OTA & Web OTA åŸç† - Vibe Coding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <style>
        .flow-diagram {
            background: #f1f5f9;
            border: 2px dashed #cbd5e1;
            border-radius: 1rem;
            padding: 2rem;
        }

        .ota-partition {
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }

        .code-block {
            background: #1e293b;
            color: #f8fafc;
            padding: 1.5rem;
            border-radius: 0.75rem;
            font-family: 'Outfit', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
        }
    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen text-gray-800 font-[Inter]">

    <!-- Hero Section -->
    <header
        class="relative bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 text-white pt-24 pb-32 overflow-hidden">
        <div
            class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1558494949-ef010cbdcc48?q=80&w=2832&auto=format&fit=crop')] bg-cover bg-center opacity-20 mix-blend-overlay">
        </div>
        <div class="absolute inset-0 bg-gradient-to-t from-gray-50 to-transparent bottom-0 h-16"></div>

        <div class="container mx-auto px-4 relative z-10 text-center">
            <span
                class="inline-block py-1 px-3 rounded-full bg-purple-500/20 border border-purple-400/30 text-purple-300 text-sm font-semibold mb-6 tracking-wide">Learning
                Unit 2</span>
            <h1 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight tracking-tight font-[Outfit]">
                Arduino OTA èˆ‡ Web OTA åŸç† <br><span class="text-indigo-400">Firmware Over-the-Air</span>
            </h1>
            <p class="text-xl md:text-2xl text-blue-100 max-w-2xl mx-auto font-light leading-relaxed">
                ç„¡ç·šé€²åŒ–çš„æ ¸å¿ƒï¼šè®“ä½ çš„ç¡¬é«”åƒè»Ÿé«”ä¸€æ¨£éš¨æ™‚æ›´æ–°ã€‚<br>
                <span class="text-base text-gray-300 mt-2 block">ç†è§£ A/B åˆ†å€æ©Ÿåˆ¶ï¼Œæ‰“é€ ã€Œçµ•ä¸è®Šç£šã€çš„æ›´æ–°æµç¨‹ã€‚</span>
            </p>

            <div class="mt-8 flex flex-wrap justify-center gap-4">
                <button onclick="enterMediaMode('video', 'https://www.youtube.com/embed/F712Ip6ZahQ')"
                    class="flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-full font-bold shadow-lg transition transform hover:scale-105">
                    <span>ğŸ“º</span> è§€çœ‹æ•™å­¸å½±ç‰‡
                </button>
                <button
                    onclick="enterMediaMode('doc', 'https://docs.google.com/document/d/e/2PACX-1vRpIzcvUuG1v9PIDOpLKxqXBPykCMlhXq9duH_N6ZOZFUeyNwQBGnr3XQzHu1fCpMsnUb4-WsKGc-3U/pub?embedded=true')"
                    class="flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-full font-bold shadow-lg transition transform hover:scale-105">
                    <span>ğŸ“„</span> é–±è®€èª²ç¨‹è¬›ç¾©
                </button>
            </div>
        </div>
    </header>

    <!-- Content Container -->
    <main class="container mx-auto px-4 -mt-20 relative z-20 pb-20">

        <!-- Module 1: OTA Core -->
        <section class="module-section mb-16">
            <div class="glass-card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="p-1 bg-gradient-to-r from-indigo-500 to-purple-500"></div>
                <div class="p-8 md:p-12">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3">
                        <span class="text-4xl">ğŸ”„</span> OTA çš„æ ¸å¿ƒï¼šé›™åˆ†å€æ©Ÿåˆ¶ (20 min)
                    </h2>
                    <p class="text-gray-500 mb-8 text-lg">å¦‚ä½•ç¢ºä¿æ›´æ–°éç¨‹ä¸­æ–·é›»ï¼Œæ©Ÿå™¨ä¹Ÿä¸æœƒå£æ‰ï¼Ÿ</p>

                    <div class="grid lg:grid-cols-2 gap-10">
                        <div class="space-y-6">
                            <div class="flex gap-4">
                                <div
                                    class="bg-indigo-100 text-indigo-600 w-12 h-12 rounded-full flex items-center justify-center font-bold flex-shrink-0">
                                    1</div>
                                <div>
                                    <h3 class="font-bold text-lg mb-1">é é˜²ã€Œç£šé ­åŒ–ã€ (Bricking)</h3>
                                    <p class="text-gray-600">çµ•ä¸èƒ½ç›´æ¥è¦†è“‹æ­£åœ¨åŸ·è¡Œçš„ç¨‹å¼ï¼OTA æ¡ç”¨ã€Œå…ˆä¸‹è¼‰åˆ°å‚™ä»½å€ï¼Œé©—è­‰æˆåŠŸå¾Œå†åˆ‡æ›ã€çš„ç­–ç•¥ã€‚</p>
                                </div>
                            </div>
                            <div class="flex gap-4">
                                <div
                                    class="bg-indigo-100 text-indigo-600 w-12 h-12 rounded-full flex items-center justify-center font-bold flex-shrink-0">
                                    2</div>
                                <div>
                                    <h3 class="font-bold text-lg mb-1">åˆ†å€åˆ‡æ› (A/B Partition)</h3>
                                    <p class="text-gray-600">ESP32 å°‡ Flash åˆ†ç‚º app0 èˆ‡ app1ã€‚ç•¶ app0 æ­£åœ¨åŸ·è¡Œæ™‚ï¼ŒOTA æœƒå°‡æ–°éŸŒé«”å¯«å…¥
                                        app1ã€‚åä¹‹äº¦ç„¶ã€‚</p>
                                </div>
                            </div>
                            <div class="flex gap-4">
                                <div
                                    class="bg-indigo-100 text-indigo-600 w-12 h-12 rounded-full flex items-center justify-center font-bold flex-shrink-0">
                                    3</div>
                                <div>
                                    <h3 class="font-bold text-lg mb-1">é©—è­‰èˆ‡å•Ÿå‹•æ¨™è¨˜</h3>
                                    <p class="text-gray-600">å¯«å…¥å®Œæˆå¾Œæœƒæª¢æŸ¥ Checksumã€‚æˆåŠŸå¾Œä¿®æ”¹ `otadata` åˆ†å€ï¼ŒæŒ‡å¼•ä¸‹æ¬¡é–‹æ©Ÿå¾æ–°åˆ†å€å•Ÿå‹•ã€‚</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-slate-50 p-6 rounded-2xl border border-gray-200">
                            <h4 class="font-bold mb-4 text-center">OTA é‹ä½œç¤ºæ„åœ–</h4>
                            <div class="space-y-4">
                                <div class="ota-partition bg-blue-500 text-white shadow-md">App 0 (æ­£åœ¨åŸ·è¡Œ)</div>
                                <div class="flex justify-center text-2xl">â¬‡ï¸ <span
                                        class="text-sm self-center ml-2 text-gray-400">å¯«å…¥æ–°æ•¸æ“š</span></div>
                                <div
                                    class="ota-partition bg-gray-200 text-gray-400 border-2 border-dashed border-gray-300">
                                    App 1 (å¾…æ›´æ–°å€)</div>
                                <div
                                    class="mt-4 p-3 bg-yellow-50 rounded border border-yellow-200 text-xs text-yellow-700">
                                    <strong>å­¸ç¿’ä»»å‹™ï¼š</strong> æŸ¥é–±åˆ†å€è¡¨ï¼Œæ€è€ƒç‚ºä½• OTA åŠŸèƒ½è‡³å°‘éœ€è¦ Flash ç¸½å®¹é‡å…©å€ä»¥ä¸Šçš„ App ç©ºé–“ï¼Ÿ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 2: Web OTA Flow -->
        <section class="module-section mb-16">
            <div class="glass-card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="p-1 bg-gradient-to-r from-emerald-400 to-teal-500"></div>
                <div class="p-8 md:p-12">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="text-4xl">ğŸŒ</span> Web OTA çš„å‚³è¼¸æµç¨‹ (25 min)
                    </h2>

                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <div class="p-5 rounded-xl bg-emerald-50 border border-emerald-100">
                            <h3 class="font-bold text-emerald-800 mb-2">1. HTTP POST</h3>
                            <p class="text-sm text-emerald-700">Web OTA æœ¬è³ªä¸Šæ˜¯å°‡ .bin æª”æ¡ˆé€éç€è¦½å™¨çš„ `FormData` ä¸Šå‚³åˆ° ESP32 çš„ç‰¹å®šè·¯ç”±ã€‚
                            </p>
                        </div>
                        <div class="p-5 rounded-xl bg-blue-50 border border-blue-100">
                            <h3 class="font-bold text-blue-800 mb-2">2. ä¸²æµå¯«å…¥</h3>
                            <p class="text-sm text-blue-700">ESP32 æ”¶åˆ°æ•¸æ“šæ™‚ï¼Œç›´æ¥èª¿ç”¨ `Update.write()` å°‡äºŒé€²åˆ¶æµå¯«å…¥ Flash çš„ç‰¹å®šåœ°å€ã€‚</p>
                        </div>
                        <div class="p-5 rounded-xl bg-purple-50 border border-purple-100">
                            <h3 class="font-bold text-purple-800 mb-2">3. é€²åº¦å›å ±</h3>
                            <p class="text-sm text-purple-700">é€é JavaScript çš„ `XMLHttpRequest` ç›£è½ `progress`
                                äº‹ä»¶ï¼Œå¯¦ç¾è¦–è¦ºåŒ–é€²åº¦æ¢ã€‚</p>
                        </div>
                    </div>

                    <div class="bg-slate-900 rounded-xl p-6 overflow-hidden relative">
                        <div class="absolute top-4 right-4 text-xs text-slate-500 font-mono">browser-upload.js</div>
                        <h4 class="text-white font-bold mb-4">å‰ç«¯é€²åº¦ç›£è½ç¯„ä¾‹</h4>
                        <div class="code-block">
                            xhr.upload.addEventListener('progress', function(e) {<br>
                            &nbsp;&nbsp;if (e.lengthComputable) {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;const percent = Math.round((e.loaded / e.total) * 100);<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;progressBar.style.width = percent + '%';<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;statusText.innerText = `ä¸Šå‚³ä¸­: ${percent}%`;<br>
                            &nbsp;&nbsp;}<br>
                            });
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 3: Security -->
        <section class="module-section mb-16">
            <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl shadow-xl overflow-hidden text-white">
                <div class="p-8 md:p-12">
                    <div class="flex flex-col lg:flex-row gap-10">
                        <div class="flex-1">
                            <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                                <span class="text-4xl">ğŸ”</span> å®‰å…¨èˆ‡é©—è­‰ (15 min)
                            </h2>
                            <p class="text-gray-300 mb-6 leading-relaxed">
                                å¦‚æœéš¨ä¾¿ä¸€å€‹é€£ä¸Š Wi-Fi çš„äººéƒ½èƒ½ä¸Šå‚³éŸŒé«”ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿå®‰å…¨æ©Ÿåˆ¶æ˜¯ç”Ÿç”¢ç­‰ç´šç”¢å“çš„å¿…ä¿®èª²ã€‚
                            </p>
                            <ul class="space-y-4">
                                <li class="flex items-start gap-3">
                                    <span class="text-emerald-400">âœ”</span>
                                    <span><strong>èº«ä»½é©—è­‰ï¼š</strong> åœ¨æ›´æ–°é é¢å‰å¢åŠ å¯†ç¢¼å½ˆçª—æˆ– Token é©—è­‰ã€‚</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-emerald-400">âœ”</span>
                                    <span><strong>mDNS (ç¶²è·¯ç™¼ç¾)ï¼š</strong> è®“è¨­å‚™åœ¨ç¶²è·¯ä¸Šä»¥ `esp32.local` èº«ä»½å‡ºç¾ã€‚</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="text-emerald-400">âœ”</span>
                                    <span><strong>ElegantOTAï¼š</strong> è§£ææ­¤åº«å¦‚ä½•å°è£ é©—è­‰ -> å¯«å…¥ -> åˆ‡æ› çš„éç¨‹ã€‚</span>
                                </li>
                            </ul>
                        </div>
                        <div class="lg:w-1/3 bg-slate-700/40 p-6 rounded-xl border border-slate-600">
                            <h4 class="font-bold text-blue-300 mb-4">ç·šä¸Šä»»å‹™</h4>
                            <p class="text-sm text-gray-300 mb-4">
                                é ç¿’å¦‚ä½•åœ¨ä»£ç¢¼ä¸­åŠ å…¥ï¼š
                            </p>
                            <div class="code-block text-xs py-3 px-4 mb-4">
                                ElegantOTA.begin(&server);<br>
                                ElegantOTA.onStart(onOTAStart);<br>
                                ElegantOTA.onEnd(onOTAEnd);
                            </div>
                            <p class="text-xs text-slate-400">
                                æ€è€ƒï¼šå¦‚ä½•å¯¦ä½œç°¡å–®çš„å¯†ç¢¼é©—è­‰æˆ–ç¡¬é«” ID æ¯”å°ï¼Œé˜²æ­¢éæ³•æ›´æ–°ï¼Ÿ
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 4: Homework -->
        <section class="module-section">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-10 font-[Outfit]">å¯¦ä½œæŒ‘æˆ°ï¼šOTA æ›´æ–°æ ¸å¿ƒ</h2>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Task 2-1 -->
                <div onclick="openSubmissionModal('esp32-ota-task-1', 'ä½œæ¥­ 2-1: ã€Œç„¡ç·šé€²åŒ–ã€å¯¦ä½œåŸºç¤ Web Server OTA')"
                    class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden flex flex-col group cursor-pointer relative hover:shadow-2xl transition-all hover:-translate-y-2">
                    <div class="bg-indigo-500 h-1.5"></div>
                    <div class="p-6 flex-grow">
                        <div class="flex justify-between items-start mb-4">
                            <span class="text-4xl">ğŸ“¡</span>
                            <span class="bg-indigo-100 text-indigo-700 text-xs px-2 py-1 rounded font-bold">60
                                min</span>
                        </div>
                        <h3 class="font-bold text-xl text-gray-800 mb-2 group-hover:text-indigo-600 transition">ä½œæ¥­ 2-1
                        </h3>
                        <h4 class="font-medium text-gray-500 mb-4">ã€Œç„¡ç·šé€²åŒ–ã€</h4>
                        <p class="text-sm text-gray-600 mb-4">
                            åœ¨ ESP32 ä¸Šå»ºç«‹ `/update` è·¯ç”±ï¼Œä¸¦æ’°å¯«ä¸€å€‹åŒ…å« `<input type="file">` çš„ HTML é é¢é€²è¡Œå¯¦æ©ŸéŸŒé«”æ›´æ–°æ¸¬è©¦ã€‚
                        </p>
                    </div>
                    <div
                        class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <span
                            class="bg-white text-indigo-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">ğŸ“¤
                            ä¸Šå‚³ä½œæ¥­</span>
                    </div>
                </div>

                <!-- Task 2-2 -->
                <div onclick="openSubmissionModal('esp32-ota-task-2', 'ä½œæ¥­ 2-2: ã€Œæ›´æ–°é€²åº¦æ¢ã€è¦–è¦ºåŒ–ç”¨æˆ¶é«”é©—')"
                    class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden flex flex-col group cursor-pointer relative hover:shadow-2xl transition-all hover:-translate-y-2">
                    <div class="bg-emerald-500 h-1.5"></div>
                    <div class="p-6 flex-grow">
                        <div class="flex justify-between items-start mb-4">
                            <span class="text-4xl">ğŸ“Š</span>
                            <span class="bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded font-bold">60
                                min</span>
                        </div>
                        <h3 class="font-bold text-xl text-gray-800 mb-2 group-hover:text-emerald-600 transition">ä½œæ¥­ 2-2
                        </h3>
                        <h4 class="font-medium text-gray-500 mb-4">ã€Œæ›´æ–°é€²åº¦æ¢ã€</h4>
                        <p class="text-sm text-gray-600 mb-4">
                            ä½¿ç”¨ JavaScript XHR ç›£è½ `progress` äº‹ä»¶ï¼Œä¸¦å¯¦ä½œ CSS é€²åº¦æ¢ã€‚ç•¶æ›´æ–°æˆåŠŸæ™‚é¡¯ç¤ºã€Œé‡å•Ÿä¸­...ã€ã€‚
                        </p>
                    </div>
                    <div
                        class="absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <span
                            class="bg-white text-emerald-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">ğŸ“¤
                            ä¸Šå‚³ä½œæ¥­</span>
                    </div>
                </div>

                <!-- Task 2-3 -->
                <div onclick="openSubmissionModal('esp32-ota-task-3', 'ä½œæ¥­ 2-3: ã€Œæ–·é»çºŒå‚³èˆ‡å®‰å…¨æ€§æŒ‘æˆ°ã€')"
                    class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden flex flex-col group cursor-pointer relative hover:shadow-2xl transition-all hover:-translate-y-2">
                    <div class="bg-slate-800 h-1.5"></div>
                    <div class="p-6 flex-grow">
                        <div class="flex justify-between items-start mb-4">
                            <span class="text-4xl">ğŸ›¡ï¸</span>
                            <span class="bg-slate-100 text-slate-700 text-xs px-2 py-1 rounded font-bold">45 min</span>
                        </div>
                        <h3 class="font-bold text-xl text-gray-800 mb-2 group-hover:text-slate-600 transition">ä½œæ¥­ 2-3
                        </h3>
                        <h4 class="font-medium text-gray-500 mb-4">ã€Œå®‰å…¨é˜²ç·šã€</h4>
                        <p class="text-sm text-gray-600 mb-4">
                            å¢åŠ å¯†ç¢¼é©—è­‰é‚è¼¯ï¼Œä¸¦æ¨¡æ“¬æ–·ç¶²ç’°å¢ƒæ¸¬è©¦ ESP32 æ˜¯å¦èƒ½å„ªé›…åœ°æ¸…ç†ç·©è¡å€è€Œä¸ç•¶æ©Ÿã€‚
                        </p>
                    </div>
                    <div
                        class="absolute inset-0 bg-slate-800/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <span
                            class="bg-white text-slate-800 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">ğŸ“¤
                            ä¸Šå‚³ä½œæ¥­</span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 py-8 border-t border-gray-700 mt-10">
        <div class="container mx-auto px-4 text-center">
            <div class="border-t border-gray-700 pt-6">
                <p class="text-gray-500 text-sm mb-2">&copy; 2025 Vibe Coding. All rights reserved.</p>
                <div class="flex flex-col md:flex-row justify-center items-center gap-2 md:gap-6 text-sm text-gray-400">
                    <span>èª²ç¨‹æ•™æ - å…§éƒ¨ä½¿ç”¨</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Define Resources
        window.RESOURCES = {
            youtube: "https://www.youtube.com/embed/F712Ip6ZahQ",
            doc: "https://docs.google.com/document/d/e/2PACX-1vRpIzcvUuG1v9PIDOpLKxqXBPykCMlhXq9duH_N6ZOZFUeyNwQBGnr3XQzHu1fCpMsnUb4-WsKGc-3U/pub?embedded=true"
        };
    </script>
    <script src="/course-shared.js"></script>
</body>

</html>