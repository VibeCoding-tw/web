<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸æ“šè§£æèˆ‡é¡å‹åŒ–é™£åˆ— (Typed Arrays) - Vibe Coding</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">

</head>

<body class="bg-gray-50 font-[Inter] text-gray-800 flex flex-col min-h-screen">

    <!-- Hero Section -->
    <header
        class="relative bg-gradient-to-br from-slate-900 via-blue-900 to-cyan-900 text-white pt-20 pb-28 overflow-hidden">
        <div class="header-overlay absolute inset-0 bg-gradient-to-r from-blue-900 to-cyan-800 opacity-90"></div>
        <div class="container mx-auto px-4 relative z-10 pt-16 pb-12 text-center text-white">
            <div
                class="badge-header inline-block px-3 py-1 rounded-full bg-blue-500/20 text-blue-200 border border-blue-400/30 backdrop-blur-sm mb-4 text-sm font-bold tracking-wider">
                Study 3: Data Parsing & Typed Arrays
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-6 tracking-tight">
                æ•¸æ“šè§£æèˆ‡é¡å‹åŒ–é™£åˆ—
            </h1>
            <p class="text-xl text-blue-100 max-w-2xl mx-auto leading-relaxed mb-10">
                è§£é–äºŒé€²ä½è³‡æ–™çš„å¥§ç§˜ï¼ŒæŒæ¡ Uint8Array èˆ‡ DataViewï¼Œè®“ä½ çš„è—ç‰™å‚³è¼¸æ•ˆç‡æå‡ 10 å€ã€‚
            </p>

            <div class="flex flex-wrap justify-center gap-4">
                <button onclick="enterMediaMode('video', 'https://www.youtube.com/embed/r1FOWU14hJo')"
                    class="resource-btn bg-cyan-500 hover:bg-cyan-400 text-white px-6 py-3 rounded-full flex items-center gap-2 shadow-lg font-bold">
                    <span>â–¶ï¸</span> è§€çœ‹æ•™å­¸å½±ç‰‡
                </button>
                <button
                    onclick="enterMediaMode('doc', 'https://docs.google.com/document/d/e/2PACX-1vTYg0tCOtK-qq1aFtWtAQ0PXZYfsrYQHr9Yd_B2CO66rRoqrOywpL1ci-J1fW-uLPDIPA8ldlTJeAN8/pub?embedded=true')"
                    class="resource-btn bg-white/10 hover:bg-white/20 border border-white/20 text-white px-6 py-3 rounded-full flex items-center gap-2 backdrop-blur-sm font-bold">
                    <span>ğŸ“„</span> é–±è®€èª²ç¨‹è¬›ç¾©
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto max-w-6xl px-4 py-12 flex-grow">

        <!-- Module 1: Intuitive Lab -->
        <section class="content-block mb-24">
            <div class="section-header-left border-l-4 border-cyan-500 pl-6 mb-10">
                <span class="text-cyan-600 font-bold tracking-wider uppercase text-sm">Module 1: Intuitive Lab</span>
                <h2 class="text-3xl font-bold text-gray-900 mt-2">å‚³è¼¸æ•ˆç‡å¤§å°æ±ºï¼šJSON vs Binary</h2>
            </div>

            <div class="bg-white rounded-2xl p-8 shadow-xl border border-gray-100">
                <p class="mb-8 text-gray-600 text-lg">
                    è—ç‰™å‚³è¼¸ç‚ºäº†çœé›»èˆ‡æ•ˆç‡ï¼Œæˆ‘å€‘ä¸å¸Œæœ›å‚³é€å†—é•·çš„å­—ä¸²ã€‚è©¦è‘—è¼¸å…¥ä¸€å€‹é€Ÿåº¦å€¼ï¼Œæ¯”è¼ƒ JSON å­—ä¸²èˆ‡åŸå§‹äºŒé€²ä½ç¢¼ (Binary) çš„å¤§å°å·®ç•°ã€‚
                </p>

                <div class="grid md:grid-cols-2 gap-12">
                    <!-- Control Panel -->
                    <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                        <label class="block text-slate-700 font-bold mb-2">è¼¸å…¥é¦¬é”é€Ÿåº¦ (0 - 255)</label>
                        <div class="flex gap-4 items-center mb-6">
                            <input type="range" id="speed-slider" min="0" max="255" value="100"
                                class="flex-grow h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-cyan-500">
                            <span id="speed-value"
                                class="font-mono text-xl font-bold text-cyan-600 w-12 text-center">100</span>
                        </div>

                        <div class="text-sm text-slate-500 bg-white p-4 rounded border border-slate-200">
                            <h4 class="font-bold text-slate-700 mb-2">æƒ…å¢ƒæ¨¡æ“¬</h4>
                            <p>ä½ æ­£åœ¨é–‹ç™¼é™æ§è»Šï¼Œå¦‚æœä½ æ¯ç§’ç™¼é€ 100 æ¬¡æ§åˆ¶æŒ‡ä»¤...</p>
                        </div>
                    </div>

                    <!-- Comparison Display -->
                    <div class="flex flex-col gap-6">
                        <!-- JSON View -->
                        <div class="relative group">
                            <div
                                class="absolute -top-3 left-4 bg-pink-500 text-white text-xs font-bold px-2 py-0.5 rounded shadow">
                                å­—ä¸² (JSON)</div>
                            <div
                                class="bg-slate-800 text-white p-4 rounded-lg font-mono text-lg shadow-md border-l-4 border-pink-500">
                                <span class="text-pink-300">{</span><span class="text-green-300">"speed"</span><span
                                    class="text-pink-300">:</span> <span id="json-val"
                                    class="text-yellow-300">100</span><span class="text-pink-300">}</span>
                            </div>
                            <div class="mt-2 text-right text-sm text-slate-500 font-bold">
                                Size: <span id="json-size" class="text-pink-600 text-lg">13</span> bytes
                            </div>
                        </div>

                        <!-- Binary View -->
                        <div class="relative group">
                            <div
                                class="absolute -top-3 left-4 bg-cyan-500 text-white text-xs font-bold px-2 py-0.5 rounded shadow">
                                äºŒé€²ä½ (Binary)</div>
                            <div
                                class="bg-slate-800 text-white p-4 rounded-lg font-mono text-lg shadow-md border-l-4 border-cyan-500 flex items-center gap-4">
                                <div class="flex flex-col items-center">
                                    <span class="text-xs text-slate-400 mb-1">Index 0</span>
                                    <div id="bin-val"
                                        class="w-12 h-12 bg-cyan-900 border border-cyan-500 rounded flex items-center justify-center text-cyan-300 font-bold shadow-[0_0_15px_rgba(6,182,212,0.5)]">
                                        0x64
                                    </div>
                                </div>
                                <span class="text-slate-500 text-sm italic"><- åƒ…åƒ…ä¸€å€‹ Byte!</span>
                            </div>
                            <div class="mt-2 text-right text-sm text-slate-500 font-bold">
                                Size: <span class="text-cyan-600 text-lg">1</span> byte
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 2: Core Principles -->
        <section class="content-block mb-24">
            <div class="section-header-left border-l-4 border-indigo-500 pl-6 mb-10">
                <span class="text-indigo-600 font-bold tracking-wider uppercase text-sm">Module 2: Core
                    Principles</span>
                <h2 class="text-3xl font-bold text-gray-900 mt-2">é€è¦– ArrayBuffer èˆ‡ä½å…ƒçµ„é †åº (Endianness)</h2>
            </div>

            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Concept 1: The Glasses -->
                <div class="space-y-6">
                    <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                        <span class="bg-indigo-100 p-2 rounded-lg text-indigo-600">ğŸ‘“</span> é¡å‹åŒ–é™£åˆ—æ˜¯ä½ çš„çœ¼é¡
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        <b>ArrayBuffer</b> æ˜¯ä¸€å¡ŠåŸå§‹çš„è¨˜æ†¶é«”ç©ºé–“ï¼Œè£¡é¢åªæœ‰ 0 å’Œ 1ã€‚æˆ‘å€‘ç„¡æ³•ç›´æ¥æ“ä½œå®ƒï¼Œå¿…é ˆæˆ´ä¸Šä¸åŒåº¦æ•¸çš„ã€Œçœ¼é¡ã€â€”â€”ä¹Ÿå°±æ˜¯ <b>Typed Array</b> (å¦‚
                        Uint8Array, Int16Array) æ‰èƒ½è§£è®€å…¶ä¸­çš„æ„ç¾©ã€‚
                    </p>

                    <div class="bg-white p-6 rounded-xl shadow border border-gray-100">
                        <div class="flex justify-between text-sm text-gray-500 mb-2 font-mono">
                            <span>Memory (ArrayBuffer)</span>
                            <span>0x00 - 0x03</span>
                        </div>
                        <!-- Visual Memory Block -->
                        <div class="flex border-2 border-slate-300 rounded overflow-hidden mb-6">
                            <div class="flex-1 h-12 bg-slate-200 border-r border-slate-300 flex items-center justify-center font-mono text-slate-400"
                                id="mem-0">11111111</div>
                            <div class="flex-1 h-12 bg-slate-200 border-r border-slate-300 flex items-center justify-center font-mono text-slate-400"
                                id="mem-1">11111111</div>
                            <div class="flex-1 h-12 bg-slate-200 border-r border-slate-300 flex items-center justify-center font-mono text-slate-400"
                                id="mem-2">00000000</div>
                            <div class="flex-1 h-12 bg-slate-200 flex items-center justify-center font-mono text-slate-400"
                                id="mem-3">00000000</div>
                        </div>

                        <div class="flex gap-2">
                            <button onclick="changeView('uint8')"
                                class="flex-1 py-2 rounded border border-indigo-200 bg-indigo-50 text-indigo-700 font-bold hover:bg-indigo-100 transition">Uint8Array</button>
                            <button onclick="changeView('int16')"
                                class="flex-1 py-2 rounded border border-purple-200 bg-purple-50 text-purple-700 font-bold hover:bg-purple-100 transition">Int16Array</button>
                        </div>
                        <div id="view-explanation"
                            class="mt-4 p-3 bg-indigo-50 text-indigo-800 rounded font-mono text-sm">
                            æ¯å€‹æ ¼å­è¢«è¦–ç‚ºç¨ç«‹çš„æ•¸å­— (0-255)ã€‚
                        </div>
                    </div>
                </div>

                <!-- Concept 2: Endianness -->
                <div class="space-y-6">
                    <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                        <span class="bg-pink-100 p-2 rounded-lg text-pink-600">â‡„</span> ä½å…ƒçµ„é †åº (Endianness)
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        ç•¶æ•¸å­—è¶…é 8 bits (ä¾‹å¦‚ 1000 = 0x03E8) æ™‚ï¼Œå®ƒéœ€è¦ä½”ç”¨å…©å€‹ä½ç½®ã€‚å…ˆæ”¾é«˜ä½ (0x03) é‚„æ˜¯ä½ä½ (0xE8)ï¼Ÿé€™å°±æ˜¯ <b>Big-Endian</b> èˆ‡
                        <b>Little-Endian</b> çš„å·®ç•°ã€‚
                    </p>

                    <div class="bg-slate-900 p-6 rounded-xl shadow-lg text-white font-mono relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-2 opacity-20 text-6xl font-bold">FE</div>

                        <div class="mb-4">
                            <span class="text-gray-400">æ•¸å€¼ï¼š</span> <span
                                class="text-yellow-400 text-xl font-bold">1000</span> <span
                                class="text-gray-500">(0x03E8)</span>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <!-- Big Endian -->
                            <div class="border border-slate-600 rounded p-3 bg-slate-800">
                                <div class="text-xs text-gray-400 mb-2 text-center">Big-Endian (ç¶²è·¯æ¨™æº–)</div>
                                <div class="flex justify-center gap-1">
                                    <div
                                        class="w-10 h-10 border border-green-500 bg-green-900/40 flex items-center justify-center rounded">
                                        03</div>
                                    <div
                                        class="w-10 h-10 border border-green-500 bg-green-900/40 flex items-center justify-center rounded">
                                        E8</div>
                                </div>
                                <div class="text-center mt-2 text-xs text-green-400">ç¬¦åˆäººé¡é–±è®€é †åº</div>
                            </div>

                            <!-- Little Endian -->
                            <div class="border border-slate-600 rounded p-3 bg-slate-800">
                                <div class="text-xs text-gray-400 mb-2 text-center">Little-Endian (Intel/ARM)</div>
                                <div class="flex justify-center gap-1">
                                    <div
                                        class="w-10 h-10 border border-red-500 bg-red-900/40 flex items-center justify-center rounded">
                                        E8</div>
                                    <div
                                        class="w-10 h-10 border border-red-500 bg-red-900/40 flex items-center justify-center rounded">
                                        03</div>
                                </div>
                                <div class="text-center mt-2 text-xs text-red-400">ä½ä½åœ¨å‰</div>
                            </div>
                        </div>

                        <div class="mt-4 text-sm text-gray-300 bg-slate-800 p-2 rounded border-l-2 border-yellow-500">
                            <strong>æ³¨æ„ï¼š</strong> DataView é è¨­æ˜¯å¤§ç«¯åºï¼Œä½† Web Assembly (WASM) èˆ‡å¤šæ•¸å¾®è™•ç†å™¨æ˜¯å°ç«¯åºã€‚ä½¿ç”¨
                            <code>getUint16(0, true)</code> ä¸­çš„ true ä¾†é–‹å•Ÿå°ç«¯æ¨¡å¼ã€‚
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 3: Practical Challenge -->
        <section class="content-block mb-12">
            <div class="section-header-left border-l-4 border-emerald-500 pl-6 mb-10">
                <span class="text-emerald-600 font-bold tracking-wider uppercase text-sm">Module 3: Practical
                    Challenge</span>
                <h2 class="text-3xl font-bold text-gray-900 mt-2">å¯¦æˆ°ï¼šå°è£èˆ‡è§£ç¢¼</h2>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Task 1: Command Encoder -->
                <div onclick="openSubmissionModal('typed-arrays-task-1', 'ä½œæ¥­ 3-1: é¦¬é”æŒ‡ä»¤å°è£')"
                    class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden cursor-pointer relative group transition-all hover:shadow-2xl">
                    <div class="bg-emerald-500 text-white px-6 py-4 flex justify-between items-center">
                        <h3 class="font-bold text-lg">ä½œæ¥­ 3-1: é¦¬é”æŒ‡ä»¤å°è£</h3>
                        <span class="text-emerald-100 text-sm font-mono">Uint8Array(2)</span>
                    </div>
                    <div class="p-6">
                        <div onclick="event.stopPropagation()" class="cursor-auto">
                            <p class="text-gray-600 text-sm mb-6">
                                è«‹æ‹–å‹•æ»‘æ¡¿æ§åˆ¶å·¦å³è¼ªé€Ÿåº¦ï¼Œè§€å¯Ÿæ•¸æ“šå¦‚ä½•è¢«ã€Œæ‰“åŒ…ã€é€² ArrayBufferã€‚æœ€å¾Œç”¢ç”Ÿå‡ºçš„ Hex Code å°±æ˜¯æˆ‘å€‘è¦é€é BLE ç™¼é€çš„ payloadã€‚
                            </p>

                            <div class="space-y-6 mb-6">
                                <!-- Left Motor -->
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <label class="text-xs font-bold text-gray-500 uppercase">Left Motor</label>
                                        <span id="left-val" class="text-xs font-bold text-emerald-600">0</span>
                                    </div>
                                    <input type="range" id="left-slider" min="0" max="255" value="0"
                                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500">
                                </div>

                                <!-- Right Motor -->
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <label class="text-xs font-bold text-gray-500 uppercase">Right Motor</label>
                                        <span id="right-val" class="text-xs font-bold text-emerald-600">0</span>
                                    </div>
                                    <input type="range" id="right-slider" min="0" max="255" value="0"
                                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-emerald-500">
                                </div>
                            </div>

                            <!-- Result -->
                            <div class="bg-gray-900 p-4 rounded-lg">
                                <div class="text-xs text-gray-400 mb-2 font-mono">Payload Preview (Hex)</div>
                                <div class="flex gap-2 font-mono text-2xl text-white justify-center">
                                    <span id="hex-0"
                                        class="p-2 bg-gray-800 rounded border border-gray-600 min-w-[3rem] text-center">00</span>
                                    <span id="hex-1"
                                        class="p-2 bg-gray-800 rounded border border-gray-600 min-w-[3rem] text-center">00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Click Hint Overlay -->
                    <div
                        class="absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none">
                        <span
                            class="bg-white text-emerald-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">
                            ğŸ“¤ é»æ“Šç¹³äº¤ä½œæ¥­
                        </span>
                    </div>
                </div>

                <!-- Task 2: Sensor Decoder -->
                <div onclick="openSubmissionModal('typed-arrays-task-2', 'ä½œæ¥­ 3-2: æ„Ÿæ¸¬å™¨æ•¸æ“šè§£ç¢¼')"
                    class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden cursor-pointer relative group transition-all hover:shadow-2xl">
                    <div class="bg-purple-600 text-white px-6 py-4 flex justify-between items-center">
                        <h3 class="font-bold text-lg">ä½œæ¥­ 3-2: æ„Ÿæ¸¬å™¨æ•¸æ“šè§£ç¢¼</h3>
                        <span class="text-purple-100 text-sm font-mono">DataView</span>
                    </div>
                    <div class="p-6">
                        <div onclick="event.stopPropagation()" class="cursor-auto">
                            <p class="text-gray-600 text-sm mb-4">
                                å‡è¨­æ”¶åˆ°å…©å€‹ä½å…ƒçµ„çš„è·é›¢æ•¸æ“šï¼Œè«‹ç·´ç¿’ä½¿ç”¨ <code>DataView</code> å°‡å…¶é‚„åŸç‚ºæ•´æ•¸ã€‚
                            </p>

                            <div
                                class="flex gap-2 items-center mb-6 bg-purple-50 p-4 rounded-lg border border-purple-100">
                                <span class="text-sm font-bold text-purple-800">æ”¶åˆ°æ•¸æ“š (Hex):</span>
                                <div class="flex gap-2">
                                    <input type="text" id="decoder-hex-input" value="03 E8"
                                        class="font-mono text-center w-24 p-1 border border-purple-300 rounded focus:outline-none focus:border-purple-500 text-purple-700 font-bold uppercase">
                                </div>
                            </div>

                            <div class="bg-gray-800 rounded-lg p-4 font-mono text-xs text-gray-300 relative mb-4">
                                <div class="text-gray-500 mb-2">// JavaScript Code</div>
                                <div>const buffer = ...; // from bluetooth</div>
                                <div>const view = new DataView(buffer);</div>
                                <div class="flex items-center gap-2 mt-2">
                                    <span class="text-purple-400">const</span> distance =
                                    <span class="text-yellow-300">view.getUint16(0);</span>
                                </div>
                            </div>

                            <button onclick="decodeHex()"
                                class="w-full py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold shadow transition mb-4">
                                åŸ·è¡Œè§£ç¢¼
                            </button>

                            <div class="flex justify-between items-center border-t border-gray-100 pt-4">
                                <span class="text-gray-600 font-bold">è§£ç¢¼çµæœ (mm):</span>
                                <span id="decode-result" class="text-2xl font-bold text-gray-800">--</span>
                            </div>
                        </div>
                    </div>
                    <!-- Click Hint Overlay -->
                    <div
                        class="absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none">
                        <span
                            class="bg-white text-purple-600 px-4 py-2 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">
                            ğŸ“¤ é»æ“Šç¹³äº¤ä½œæ¥­
                        </span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-900 text-white py-12 border-t border-gray-800">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-500">Â© 2025 Vibe Coding. All rights reserved.</p>
        </div>
    </footer>

    <!-- Media Overlay injected by course-shared.js -->

    <script>
        // --- Lab Logic: Efficiency Showdown ---
        const speedSlider = document.getElementById('speed-slider');
        const speedValue = document.getElementById('speed-value');
        const jsonVal = document.getElementById('json-val');
        const jsonSize = document.getElementById('json-size');
        const binVal = document.getElementById('bin-val');

        function updateEfficiency() {
            const val = parseInt(speedSlider.value);
            speedValue.innerText = val;

            // Update JSON
            jsonVal.innerText = val;
            const jsonStr = JSON.stringify({ speed: val }); // {"speed":100}
            // In the display we added spaces for readability but let's count strict JSON
            // {"speed":100} -> 13 chars
            // {"speed":5} -> 11 chars
            jsonSize.innerText = jsonStr.length;

            // Update Binary
            const hex = val.toString(16).toUpperCase().padStart(2, '0');
            binVal.innerText = "0x" + hex;

            // Visual feedback
            binVal.classList.remove('shadow-[0_0_15px_rgba(6,182,212,0.5)]');
            void binVal.offsetWidth; // trigger reflow
            binVal.classList.add('shadow-[0_0_15px_rgba(6,182,212,0.5)]');
        }

        speedSlider.addEventListener('input', updateEfficiency);

        // --- Core Principle Logic: Typed Array View ---
        function changeView(type) {
            const mem0 = document.getElementById('mem-0');
            const mem1 = document.getElementById('mem-1');
            const explanation = document.getElementById('view-explanation');

            if (type === 'uint8') {
                mem0.innerText = "255";
                mem1.innerText = "255";
                explanation.innerText = "Uint8Array: æ¯å€‹æ ¼å­è¢«è¦–ç‚ºç¨ç«‹çš„ 1 Byte æ•´æ•¸ (0-255)ã€‚";
                explanation.className = "mt-4 p-3 bg-indigo-50 text-indigo-800 rounded font-mono text-sm border border-indigo-200";
            } else {
                mem0.innerText = "-1";
                mem1.innerText = "(é«˜ä½)";
                explanation.innerText = "Int16Array: å…©å€‹æ ¼å­åˆä½µæˆä¸€å€‹ 2 Bytes æœ‰è™Ÿæ•´æ•¸ (-32768 ~ 32767)ã€‚";
                explanation.className = "mt-4 p-3 bg-purple-50 text-purple-800 rounded font-mono text-sm border border-purple-200";
            }
        }

        // --- Challenge Logic: Motor Encoder ---
        const leftSlider = document.getElementById('left-slider');
        const rightSlider = document.getElementById('right-slider');
        const leftValDisplay = document.getElementById('left-val');
        const rightValDisplay = document.getElementById('right-val');
        const hex0 = document.getElementById('hex-0');
        const hex1 = document.getElementById('hex-1');

        function updateMotorPacket() {
            const left = parseInt(leftSlider.value);
            const right = parseInt(rightSlider.value);

            leftValDisplay.innerText = left;
            rightValDisplay.innerText = right;

            hex0.innerText = left.toString(16).toUpperCase().padStart(2, '0');
            hex1.innerText = right.toString(16).toUpperCase().padStart(2, '0');
        }

        leftSlider.addEventListener('input', updateMotorPacket);
        rightSlider.addEventListener('input', updateMotorPacket);

        // --- Challenge Logic: Sensor Decoder ---
        function decodeHex() {
            const input = document.getElementById('decoder-hex-input').value.replace(/\s/g, '');
            const resultDisplay = document.getElementById('decode-result');

            try {
                if (input.length !== 4) throw new Error("é•·åº¦éŒ¯èª¤");

                // Parse hex to Uint8Array first
                const buffer = new Uint8Array(2);
                buffer[0] = parseInt(input.substring(0, 2), 16);
                buffer[1] = parseInt(input.substring(2, 4), 16);

                if (isNaN(buffer[0]) || isNaN(buffer[1])) throw new Error("ç„¡æ•ˆçš„ Hex");

                const view = new DataView(buffer.buffer);
                const value = view.getUint16(0); // Big Endian by default

                resultDisplay.innerText = value;
                resultDisplay.className = "text-2xl font-bold text-purple-600";

            } catch (e) {
                resultDisplay.innerText = "éŒ¯èª¤";
                resultDisplay.className = "text-2xl font-bold text-red-500";
            }
        }

        // --- Video/Doc Overlay Logic ---
        // Injected by course-shared.js

        // Define Resources
        window.RESOURCES = {
            youtube: "https://www.youtube.com/embed/r1FOWU14hJo",
            doc: "https://docs.google.com/document/d/e/2PACX-1vTYg0tCOtK-qq1aFtWtAQ0PXZYfsrYQHr9Yd_B2CO66rRoqrOywpL1ci-J1fW-uLPDIPA8ldlTJeAN8/pub?embedded=true"
        };
    </script>
    <script src="/course-shared.js"></script>
    <script>

        // Init
        updateEfficiency();
        updateMotorPacket();
        changeView('uint8');

    </script>
</body>

</html>